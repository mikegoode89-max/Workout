<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"/>
<meta name="theme-color" content="#0f0f10"/>
<meta name="mobile-web-app-capable" content="yes"/>
<meta name="apple-mobile-web-app-capable" content="yes"/>
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"/>
<meta name="apple-mobile-web-app-title" content="Train"/>
<title>Berkhan √ó Sulek</title>
<link rel="preconnect" href="https://fonts.googleapis.com"/>
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
<link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@300;400;500;600&family=DM+Mono:wght@400;500&display=swap" rel="stylesheet"/>
<style>
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0;-webkit-tap-highlight-color:transparent}
:root{--bg:#0f0f10;--surface:#1a1a1c;--surface2:#222225;--border:rgba(255,255,255,0.06);--text:#f0f0f2;--muted:rgba(240,240,242,0.45);--dim:rgba(240,240,242,0.25);--r:16px;--r-sm:10px;--safe-bottom:env(safe-area-inset-bottom,0px)}
html,body{height:100%;background:var(--bg);overflow:hidden}
#app{height:100%;overflow-y:auto;-webkit-overflow-scrolling:touch;overscroll-behavior:none;font-family:'DM Sans',sans-serif;color:var(--text);max-width:480px;margin:0 auto;-webkit-font-smoothing:antialiased;padding-bottom:calc(80px + var(--safe-bottom))}
.header{padding:56px 24px 24px}
.header-label{font-size:11px;font-weight:500;letter-spacing:.12em;text-transform:uppercase;color:var(--dim);margin-bottom:8px}
.header-title{font-size:28px;font-weight:600;letter-spacing:-.02em}
.header-sub{font-size:14px;color:var(--muted);margin-top:6px;font-weight:300}
.nav{position:fixed;bottom:0;left:50%;transform:translateX(-50%);width:100%;max-width:480px;background:rgba(15,15,16,.95);backdrop-filter:blur(20px);border-top:1px solid var(--border);display:flex;padding:10px 8px calc(10px + var(--safe-bottom));z-index:100}
.nav-btn{flex:1;display:flex;flex-direction:column;align-items:center;gap:3px;padding:8px 4px;background:none;border:none;cursor:pointer;border-radius:var(--r-sm)}
.nav-icon{font-size:20px;line-height:1}
.nav-label{font-size:10px;font-weight:500;letter-spacing:.04em;color:var(--dim);text-transform:uppercase}
.nav-label.active{color:var(--text)}
.day-strip{display:flex;gap:8px;padding:0 24px 24px;overflow-x:auto;scrollbar-width:none}
.day-strip::-webkit-scrollbar{display:none}
.day-pill{display:flex;flex-direction:column;align-items:center;gap:5px;padding:12px 16px;background:var(--surface);border:1px solid var(--border);border-radius:100px;cursor:pointer;white-space:nowrap;flex-shrink:0;min-width:72px;transition:all .2s}
.day-pill.active{border-color:transparent}
.pill-label{font-size:11px;font-weight:500;letter-spacing:.05em;text-transform:uppercase;color:var(--dim)}
.day-pill.active .pill-label{color:rgba(0,0,0,.65)}
.pill-name{font-size:13px;font-weight:600;color:var(--muted)}
.day-pill.active .pill-name{color:rgba(0,0,0,.85)}
.pill-dot{width:4px;height:4px;border-radius:50%;background:rgba(255,255,255,.1)}
.content{padding:0 24px}
.hero{padding:20px;border-radius:var(--r);margin-bottom:20px;position:relative;overflow:hidden}
.hero-label{font-size:11px;font-weight:500;letter-spacing:.1em;text-transform:uppercase;color:var(--dim);margin-bottom:4px}
.hero-name{font-size:26px;font-weight:600;letter-spacing:-.02em;margin-bottom:6px}
.hero-focus{font-size:13px;color:var(--muted);font-weight:300;margin-bottom:16px}
.hero-stats{display:flex;gap:8px;flex-wrap:wrap}
.stat-chip{display:flex;align-items:center;gap:5px;background:rgba(255,255,255,.07);border-radius:100px;padding:5px 12px;font-size:12px;color:var(--muted)}
.stat-chip b{font-family:'DM Mono',monospace;font-weight:400}
.progress-ring{position:absolute;right:18px;top:50%;transform:translateY(-50%)}
.note-strip{background:var(--surface);border-radius:var(--r-sm);padding:12px 16px;margin-bottom:20px;font-size:13px;color:var(--muted);font-weight:300;line-height:1.6;font-style:italic;border:1px solid var(--border)}
.section-label{font-size:11px;font-weight:500;letter-spacing:.1em;text-transform:uppercase;color:var(--dim);margin-bottom:10px}
.ex-card{background:var(--surface);border:1px solid var(--border);border-radius:var(--r);margin-bottom:10px;overflow:hidden;transition:border-color .3s}
.ex-header{display:flex;align-items:center;justify-content:space-between;padding:16px 18px;cursor:pointer;user-select:none}
.ex-left{display:flex;align-items:center;gap:12px;flex:1;min-width:0}
.ex-dot{width:8px;height:8px;border-radius:50%;flex-shrink:0}
.ex-info{min-width:0}
.ex-name{font-size:15px;font-weight:500;letter-spacing:-.01em;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.ex-meta{font-size:12px;color:var(--dim);margin-top:2px;font-weight:300}
.ex-right{display:flex;align-items:center;gap:8px;flex-shrink:0}
.info-btn{width:26px;height:26px;border-radius:50%;border:1.5px solid rgba(255,255,255,.12);background:transparent;color:var(--dim);font-size:12px;font-weight:700;cursor:pointer;display:flex;align-items:center;justify-content:center;font-family:'DM Sans',sans-serif;flex-shrink:0}
.info-btn:active{background:rgba(255,255,255,.1);color:var(--text)}
.chevron{font-size:14px;color:var(--dim);transition:transform .2s;display:inline-block}
.chevron.open{transform:rotate(90deg)}
.done-badge{font-size:12px;color:var(--dim);font-family:'DM Mono',monospace}
.ex-body{padding:0 18px 16px}
.cue{background:var(--surface2);border-radius:var(--r-sm);padding:10px 14px;font-size:12px;color:var(--muted);font-weight:300;line-height:1.6;margin-bottom:12px;border:1px solid var(--border)}
.set-row{display:flex;align-items:center;gap:10px;padding:10px 0;border-bottom:1px solid var(--border)}
.set-row:last-child{border-bottom:none}
.set-num{font-family:'DM Mono',monospace;font-size:11px;color:var(--dim);min-width:18px;text-align:center}
.set-info{flex:1}
.set-reps{font-size:14px;font-weight:500;font-family:'DM Mono',monospace}
.set-note-txt{font-size:11px;color:var(--dim);font-weight:300;margin-top:1px}
.set-input{background:var(--surface2);border:1px solid var(--border);border-radius:8px;color:var(--text);font-family:'DM Mono',monospace;font-size:13px;padding:7px 10px;width:62px;text-align:center;outline:none}
.set-input:focus{border-color:rgba(255,255,255,.2)}
.set-check{width:30px;height:30px;border-radius:50%;border:1.5px solid rgba(255,255,255,.15);background:transparent;cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:14px;color:transparent;transition:all .2s;flex-shrink:0}
.set-check.done{border-color:transparent;color:#0f0f10}
.session-notes{margin-top:20px;margin-bottom:8px}
.notes-ta{width:100%;background:var(--surface);border:1px solid var(--border);border-radius:var(--r-sm);color:var(--muted);font-family:'DM Sans',sans-serif;font-size:13px;font-weight:300;padding:14px 16px;resize:none;outline:none;min-height:80px;line-height:1.6}
.notes-ta:focus{border-color:rgba(255,255,255,.15)}
.notes-ta::placeholder{color:var(--dim)}
.ov-card{background:var(--surface);border:1px solid var(--border);border-radius:var(--r);margin-bottom:10px;padding:18px 20px;cursor:pointer;display:flex;align-items:center;gap:16px}
.ov-icon{width:44px;height:44px;border-radius:12px;display:flex;align-items:center;justify-content:center;font-size:20px;flex-shrink:0}
.ov-info{flex:1;min-width:0}
.ov-name{font-size:16px;font-weight:500;letter-spacing:-.01em;margin-bottom:3px}
.ov-sub{font-size:12px;color:var(--dim);font-weight:300}
.ov-bar{height:3px;background:rgba(255,255,255,.07);border-radius:2px;margin-top:10px;overflow:hidden}
.ov-fill{height:100%;border-radius:2px;transition:width .5s ease}
.ov-pct{font-family:'DM Mono',monospace;font-size:12px;color:var(--dim);flex-shrink:0}
.reset-btn{width:100%;padding:14px;background:none;border:1px solid rgba(255,80,80,.15);border-radius:var(--r-sm);color:rgba(255,100,100,.5);font-family:'DM Sans',sans-serif;font-size:12px;font-weight:500;letter-spacing:.08em;text-transform:uppercase;cursor:pointer;margin-top:20px}
.reset-btn:active{border-color:rgba(255,80,80,.4);color:rgba(255,100,100,.8)}
.bio-card{background:var(--surface);border:1px solid var(--border);border-radius:var(--r);padding:20px;margin-bottom:10px}
.bio-who{font-size:11px;font-weight:500;letter-spacing:.1em;text-transform:uppercase;color:var(--dim);margin-bottom:8px}
.bio-name-h{font-size:17px;font-weight:600;letter-spacing:-.02em;margin-bottom:10px}
.bio-text{font-size:13px;color:var(--muted);line-height:1.7;font-weight:300}
.p-card{background:var(--surface);border:1px solid var(--border);border-radius:var(--r);padding:20px;margin-bottom:10px}
.p-icon{font-size:22px;margin-bottom:10px}
.p-title{font-size:15px;font-weight:600;letter-spacing:-.01em;margin-bottom:6px}
.p-desc{font-size:13px;color:var(--muted);font-weight:300;line-height:1.65}
.divider{height:1px;background:var(--border);margin:24px 0}
.rule-row{display:flex;gap:14px;padding:12px 0;border-bottom:1px solid var(--border)}
.rule-row:last-child{border-bottom:none}
.rule-num{font-family:'DM Mono',monospace;font-size:11px;color:var(--dim);min-width:22px;padding-top:2px}
.rule-text{font-size:13px;color:var(--muted);font-weight:300;line-height:1.6}
.modal-overlay{position:fixed;inset:0;background:rgba(0,0,0,.7);backdrop-filter:blur(6px);z-index:200;display:flex;align-items:flex-end;justify-content:center;animation:fadeIn .15s ease}
@keyframes fadeIn{from{opacity:0}to{opacity:1}}
.modal{background:#1e1e21;border-radius:24px 24px 0 0;max-width:480px;width:100%;border-top:1px solid rgba(255,255,255,.08);animation:slideUp .25s cubic-bezier(.32,.72,0,1);max-height:85vh;overflow-y:auto;padding-bottom:calc(20px + var(--safe-bottom))}
@keyframes slideUp{from{transform:translateY(100%)}to{transform:translateY(0)}}
.modal-handle{width:36px;height:4px;background:rgba(255,255,255,.15);border-radius:2px;margin:12px auto 0}
.modal-header{padding:20px 24px 16px;border-bottom:1px solid var(--border)}
.modal-tag{font-size:11px;font-weight:500;letter-spacing:.1em;text-transform:uppercase;color:var(--dim);margin-bottom:6px}
.modal-title{font-size:20px;font-weight:600;letter-spacing:-.02em}
.modal-body{padding:20px 24px}
.modal-steps-label{font-size:11px;font-weight:500;letter-spacing:.1em;text-transform:uppercase;color:var(--dim);margin-bottom:10px}
.modal-howto{font-size:14px;color:rgba(240,240,242,.65);font-weight:300;line-height:1.8;margin-bottom:20px}
.modal-cue-box{background:var(--surface2);border-radius:var(--r-sm);padding:14px 16px;border:1px solid var(--border);border-left-width:3px}
.modal-cue-label{font-size:10px;font-weight:500;letter-spacing:.1em;text-transform:uppercase;color:var(--dim);margin-bottom:6px}
.modal-cue-text{font-size:13px;color:var(--muted);font-weight:400;line-height:1.6;font-style:italic}
.modal-close{display:block;width:calc(100% - 48px);margin:20px 24px 0;padding:14px;border-radius:var(--r-sm);border:none;background:rgba(255,255,255,.06);color:var(--text);font-family:'DM Sans',sans-serif;font-size:14px;font-weight:500;cursor:pointer}
.install-banner{display:none;position:fixed;bottom:calc(80px + var(--safe-bottom));left:50%;transform:translateX(-50%);background:#1e1e21;border:1px solid rgba(255,255,255,.1);border-radius:var(--r);padding:14px 18px;max-width:calc(480px - 32px);width:calc(100% - 32px);z-index:99;box-shadow:0 8px 32px rgba(0,0,0,.5);align-items:center;gap:14px}
.install-banner.show{display:flex}
.install-text{flex:1;font-size:13px;color:var(--muted);line-height:1.4}
.install-text strong{color:var(--text);font-weight:500}
.install-btn{background:var(--text);color:#0f0f10;border:none;border-radius:8px;padding:8px 14px;font-family:'DM Sans',sans-serif;font-size:13px;font-weight:600;cursor:pointer;white-space:nowrap;flex-shrink:0}
.install-x{background:none;border:none;color:var(--dim);font-size:20px;cursor:pointer;padding:0;line-height:1;flex-shrink:0}
.view{display:none}
.view.active{display:block}
</style>
</head>
<body>
<div id="app">
  <div class="header">
    <div class="header-label">Training</div>
    <div class="header-title">Berkhan √ó Sulek</div>
    <div class="header-sub">5-day split ¬∑ RPT method ¬∑ 30‚Äì45 min</div>
  </div>
  <div id="view-plan" class="view active"></div>
  <div id="view-overview" class="view"></div>
  <div id="view-principles" class="view"></div>
</div>

<nav class="nav">
  <button class="nav-btn" onclick="switchView('plan')">
    <span class="nav-icon">‚ö°</span><span class="nav-label" id="nl-plan">Workout</span>
  </button>
  <button class="nav-btn" onclick="switchView('overview')">
    <span class="nav-icon">üìä</span><span class="nav-label" id="nl-overview">Week</span>
  </button>
  <button class="nav-btn" onclick="switchView('principles')">
    <span class="nav-icon">üìñ</span><span class="nav-label" id="nl-principles">Method</span>
  </button>
</nav>

<div id="modal" style="display:none" class="modal-overlay" onclick="closeModal()">
  <div class="modal" onclick="event.stopPropagation()">
    <div class="modal-handle"></div>
    <div class="modal-header">
      <div class="modal-tag">How to perform</div>
      <div class="modal-title" id="m-title"></div>
    </div>
    <div class="modal-body">
      <div class="modal-steps-label">Step by step</div>
      <div class="modal-howto" id="m-howto"></div>
      <div class="modal-cue-box" id="m-cue-box">
        <div class="modal-cue-label" id="m-cue-label">Key cue</div>
        <div class="modal-cue-text" id="m-cue"></div>
      </div>
    </div>
    <button class="modal-close" onclick="closeModal()">Got it</button>
  </div>
</div>

<div class="install-banner" id="install-banner">
  <div class="install-text"><strong>Add to home screen</strong><br>Install for offline access</div>
  <button class="install-btn" id="install-btn">Install</button>
  <button class="install-x" onclick="document.getElementById('install-banner').classList.remove('show')">√ó</button>
</div>

<script>
const DAYS = [
  {
    id:1,label:"Mon",name:"Chest",color:"#FF6B6B",colorDim:"rgba(255,107,107,0.12)",
    focus:"Upper chest dominant",totalTime:"35‚Äì40 min",
    note:"Heaviest set first. Incline everything. Last set to failure.",
    exercises:[
      {name:"Incline Barbell Bench",type:"Compound",rest:"3‚Äì4 min",
       cue:"Retract scapula. Drive chest up to bar, not bar to chest.",
       howTo:"Set bench to 30‚Äì45¬∞. Grip bar just outside shoulder width. Lower to your upper chest over 2‚Äì3 seconds, then press explosively back up. Keep feet flat, back slightly arched, shoulder blades pinched. Treat every top set as a max effort.",
       sets:[{reps:"4‚Äì6",note:"Top set ‚Äî absolute max"},{reps:"6‚Äì8",note:"Drop 10%"},{reps:"8‚Äì10",note:"Drop 10% ‚Äî failure"}]},
      {name:"Incline Dumbbell Press",type:"Compound",rest:"2‚Äì3 min",
       cue:"Full stretch at bottom. Control the eccentric. Don't touch dumbbells at top.",
       howTo:"Set bench to 30‚Äì45¬∞. Lower dumbbells wide and deep until you feel a strong chest stretch ‚Äî elbows slightly below bench line. Press back up stopping just short of the dumbbells touching. Squeeze the pecs at the top, don't just lock out your arms.",
       sets:[{reps:"8‚Äì10",note:"Heavy, controlled"},{reps:"10‚Äì12",note:"Drop 10%, squeeze top"}]},
      {name:"Cable Fly (Low-to-High)",type:"Isolation",rest:"90 sec",
       cue:"Anchor cable low. Pull up and across. Full stretch at start, squeeze at cross.",
       howTo:"Set cable to lowest position. Stand in the centre, stagger stance for balance. With a slight elbow bend sweep your arms up and across as if hugging a barrel ‚Äî hands meet at chest height. Squeeze hard at top, return slowly. Cable maintains tension even at full stretch, unlike dumbbells.",
       sets:[{reps:"12‚Äì15",note:"Constant tension"},{reps:"15‚Äì20",note:"Failure + partials"}]},
      {name:"Dumbbell Pullover",type:"Isolation",rest:"90 sec",
       cue:"Lie across bench. Arms slightly bent. Stretch lats and chest fully at bottom.",
       howTo:"Lie perpendicular across a flat bench ‚Äî only upper back supported, hips dropped. Hold one dumbbell with both hands above chest. Lower it behind your head in a wide arc until you feel a deep stretch through chest and lats. Pull back over your chest. Keep hips low throughout.",
       sets:[{reps:"12‚Äì15",note:"Full overhead stretch"},{reps:"15+",note:"Failure"}]},
      {name:"Dumbbell Floor Press",type:"Compound",rest:"2 min",
       cue:"Elbows stop at floor ‚Äî natural range limiter. Protects shoulders.",
       howTo:"Lie flat on the floor with dumbbells in each hand. Upper arms rest on the floor at ~45¬∞ from torso. Press straight up until fully extended, then lower slowly until triceps touch the floor. The floor limits range naturally and protects your shoulders ‚Äî great for loading the top portion of the press.",
       sets:[{reps:"10‚Äì12",note:"Heavy, controlled"},{reps:"12‚Äì15",note:"Failure"}]}
    ]
  },
  {
    id:2,label:"Tue",name:"Back",color:"#4ECDC4",colorDim:"rgba(78,205,196,0.12)",
    focus:"Width + thickness",totalTime:"35‚Äì45 min",
    note:"Deadlift anchors the session. Pull elbows, not hands.",
    exercises:[
      {name:"Barbell Deadlift",type:"Compound",rest:"4‚Äì5 min",
       cue:"Hip hinge. Bar stays over mid-foot. Big breath, brace, then pull.",
       howTo:"Feet hip-width, bar over mid-foot. Hinge and grip just outside your legs. Take a big belly breath and brace hard. Push the floor away ‚Äî don't yank. Bar drags up shins and thighs. Squeeze glutes to lock out at top. Lower by hinging back first.",
       sets:[{reps:"3‚Äì5",note:"Top set ‚Äî max effort"},{reps:"4‚Äì6",note:"Drop 10%"}]},
      {name:"Barbell Bent-Over Row",type:"Compound",rest:"2‚Äì3 min",
       cue:"Hinge to ~45¬∞. Pull bar to lower chest. Elbows drive back, not out.",
       howTo:"Hinge forward until torso is ~45¬∞ to the floor, back flat. Let bar hang at arm's length. Drive elbows back and up, pulling the bar into your lower chest. Squeeze shoulder blades at the top. Lower with control. Hips completely still throughout.",
       sets:[{reps:"6‚Äì8",note:"Heavy ‚Äî RPT top set"},{reps:"8‚Äì10",note:"Drop 10%"},{reps:"10‚Äì12",note:"Failure"}]},
      {name:"Dumbbell Single-Arm Row",type:"Compound",rest:"2 min",
       cue:"Brace on knee. Drive elbow to ceiling. Full stretch at bottom.",
       howTo:"One knee and hand on bench. Hold dumbbell in opposite hand, letting it hang straight down. Drive elbow up toward the ceiling ‚Äî not out to the side ‚Äî pulling dumbbell to your hip. Let shoulder blade retract fully at top. Lower all the way for a full lat stretch. Torso stays parallel to the floor.",
       sets:[{reps:"8‚Äì10",note:"Heavy each side"},{reps:"10‚Äì12",note:"Drop, chase the stretch"}]},
      {name:"Cable Straight-Arm Pulldown",type:"Isolation",rest:"90 sec",
       cue:"Cable high. Straight arms, hinge forward. Pull to hips ‚Äî lats only.",
       howTo:"Set cable to highest position. Stand back a step, hinge slightly at hips. Arms straight out in front at head height. Keeping arms straight, sweep them down in an arc until hands reach your thighs. Feel lats contract hard at bottom. Return slowly. Don't bend your elbows ‚Äî this isolates the lats completely.",
       sets:[{reps:"12‚Äì15",note:"Constant tension"},{reps:"15‚Äì20",note:"Failure + partials"}]},
      {name:"Dumbbell Shrug",type:"Isolation",rest:"60 sec",
       cue:"Straight up, hold 2 sec at top, slow descent. No rolling.",
       howTo:"Stand holding heavy dumbbells at sides. Shrug shoulders straight up toward ears as high as possible. Hold the top for 1‚Äì2 seconds to maximise trap contraction. Lower slowly over 2‚Äì3 seconds. Pure up-and-down motion only ‚Äî no rolling forward or back.",
       sets:[{reps:"10‚Äì12",note:"Heavy, hold at top"},{reps:"12‚Äì15",note:"Failure"}]}
    ]
  },
  {
    id:3,label:"Wed",name:"Arms",color:"#FFD93D",colorDim:"rgba(255,217,61,0.12)",
    focus:"Bis + tris ¬∑ pump focus",totalTime:"30‚Äì40 min",
    note:"Pure pump day. Barbell curl is king. Volume to failure.",
    exercises:[
      {name:"Barbell Skull Crushers",type:"Isolation",rest:"2 min",
       cue:"Lower bar to forehead. Full stretch, full lockout. Elbows stay fixed.",
       howTo:"Lie flat on bench holding bar with narrow grip, arms extended over chest. Keeping upper arms vertical and still, bend only at elbows ‚Äî lower bar toward your forehead. Stop just before touching, then press to full extension. Elbows must not flare or drift forward ‚Äî they point at the ceiling the entire time.",
       sets:[{reps:"6‚Äì8",note:"Heavy top set"},{reps:"8‚Äì10",note:"Drop 10%"},{reps:"10‚Äì12",note:"Failure"}]},
      {name:"Barbell Curl",type:"Isolation",rest:"2 min",
       cue:"No swing. Supinate wrist at top. Hold peak contraction 1 sec.",
       howTo:"Stand holding barbell underhand, shoulder-width. Pin elbows to sides ‚Äî they must not move. Curl the bar up, and at the top actively supinate (rotate wrists outward) to maximise contraction. Hold 1 second. Lower under full control over 2‚Äì3 seconds. Zero body swing.",
       sets:[{reps:"6‚Äì8",note:"Berkhan RPT top set"},{reps:"8‚Äì10",note:"Drop 10%"}]},
      {name:"Cable Overhead Tricep Extension",type:"Isolation",rest:"90 sec",
       cue:"Cable behind head. Elbows fixed and close. Full long-head stretch.",
       howTo:"Set cable high. Face away from machine, hold rope behind your head. Hinge slightly forward for balance. Keeping upper arms stationary beside your head, extend at the elbow to push rope forward and down. Feel a deep tricep stretch at the start of each rep. Don't let elbows flare apart.",
       sets:[{reps:"10‚Äì12",note:"Full stretch"},{reps:"12‚Äì15",note:"Failure + partials"}]},
      {name:"Incline Dumbbell Curl",type:"Isolation",rest:"90 sec",
       cue:"Set bench to 60¬∞. Arm hangs behind torso ‚Äî don't cheat the stretch.",
       howTo:"Set bench to 60‚Äì70¬∞. Sit back against it, dumbbells hanging at your sides. The incline forces arms behind your torso for a stretched position. Curl both up simultaneously. Keep upper arms perpendicular to floor ‚Äî do not let elbows drift forward. Lower fully each rep.",
       sets:[{reps:"10‚Äì12",note:"Sulek staple"},{reps:"12‚Äì15",note:"Failure"}]},
      {name:"Cable Curl",type:"Isolation",rest:"60 sec",
       cue:"Cable low, constant tension. Slow negative. Squeeze hard at top.",
       howTo:"Set cable to lowest point. Curl up to chin height, hold peak contraction for 1‚Äì2 seconds. Lower over 3‚Äì4 seconds ‚Äî the slow negative is where the growth happens. Keep elbows at your sides. Go lighter than you think ‚Äî this is a pump finisher, not an ego lift.",
       sets:[{reps:"15‚Äì20",note:"Pump finisher"},{reps:"20+",note:"Failure"}]}
    ]
  },
  {
    id:4,label:"Thu",name:"Legs",color:"#C77DFF",colorDim:"rgba(199,125,255,0.12)",
    focus:"Quads + hamstrings",totalTime:"40‚Äì45 min",
    note:"Squat is king. No skipping. Every set counts.",
    exercises:[
      {name:"Barbell Back Squat",type:"Compound",rest:"3‚Äì4 min",
       cue:"Break hip and knee together. Chest tall. Drive knees out over toes.",
       howTo:"Bar on upper traps, feet shoulder-width, toes out 15‚Äì30¬∞. Big breath, brace core. Break at hips and knees simultaneously. Squat until thighs are parallel or below. Drive up pushing the floor away. Knees track over toes throughout. Never let your chest collapse forward.",
       sets:[{reps:"4‚Äì6",note:"Top set ‚Äî max weight"},{reps:"6‚Äì8",note:"Drop 10%"},{reps:"8‚Äì10",note:"Drop 10%"}]},
      {name:"Barbell Romanian Deadlift",type:"Compound",rest:"2‚Äì3 min",
       cue:"Push hips back as far as possible. Feel the hamstring pull before you look down.",
       howTo:"Start standing with bar at hips. Push hips back as far as possible ‚Äî not bending knees. Bar slides down your thighs. Go until you feel a strong hamstring stretch, usually mid-shin. Keep back flat, neck neutral. Drive hips forward to stand. Never round your lower back.",
       sets:[{reps:"8‚Äì10",note:"Hamstring stretch is everything"},{reps:"10‚Äì12",note:"Failure"}]},
      {name:"DB Bulgarian Split Squat",type:"Compound",rest:"2‚Äì3 min",
       cue:"Rear foot elevated. Drop straight down ‚Äî don't lunge forward.",
       howTo:"Stand ~2 feet in front of bench. Place top of rear foot on bench. Hold dumbbells at sides. Drop your back knee straight down toward the floor ‚Äî front shin stays close to vertical. Go until rear knee nearly touches. Drive through the front heel to stand. Complete all reps one leg then switch.",
       sets:[{reps:"8‚Äì10",note:"Each leg ‚Äî heavy"},{reps:"10‚Äì12",note:"Drop weight ‚Äî failure each side"}]},
      {name:"Barbell Good Morning",type:"Compound",rest:"2 min",
       cue:"Light weight only. Hinge at hips with bar on back. Hamstrings control the movement.",
       howTo:"Bar on upper back like a squat. Feet shoulder-width, slight knee bend ‚Äî maintain it throughout. Hinge forward at hips, pushing them back, until torso is close to parallel. Feel hamstrings load. Squeeze glutes to return. Never round your back. Go light ‚Äî this is not a max effort lift.",
       sets:[{reps:"10‚Äì12",note:"Moderate weight ‚Äî feel hamstrings"},{reps:"12‚Äì15",note:"Failure"}]},
      {name:"Cable Pull-Through",type:"Isolation",rest:"90 sec",
       cue:"Cable low between legs. Hip hinge ‚Äî not a squat. Squeeze glutes hard at the top.",
       howTo:"Set cable to lowest position. Stand facing away, straddle the cable. Hold rope between your legs. Hinge forward at hips (like an RDL), letting the rope pull your hands back. Drive hips forward to stand, squeezing glutes hard at top. Arms stay straight ‚Äî they're just holding the rope.",
       sets:[{reps:"12‚Äì15",note:"Hip hinge ‚Äî glute squeeze"},{reps:"15‚Äì20",note:"Failure"}]}
    ]
  },
  {
    id:5,label:"Fri",name:"Shoulders",color:"#06D6A0",colorDim:"rgba(6,214,160,0.12)",
    focus:"Press + laterals ¬∑ rear delts",totalTime:"30‚Äì40 min",
    note:"OHP anchors. Lateral raises are non-negotiable. Width.",
    exercises:[
      {name:"Barbell Overhead Press",type:"Compound",rest:"3 min",
       cue:"No lower back arch. Bar clears chin then drives straight up. Lock out at top.",
       howTo:"Hold bar at shoulder-width, resting on front delts. Feet shoulder-width, glutes squeezed. Press bar straight up ‚Äî the moment it clears your chin, lean head slightly forward so it travels in a straight line. Lock out fully at top. Lower to collarbone. Don't arch your lower back.",
       sets:[{reps:"4‚Äì6",note:"Strict top set"},{reps:"6‚Äì8",note:"Drop 10%"},{reps:"8‚Äì10",note:"Failure"}]},
      {name:"Dumbbell Lateral Raise",type:"Isolation",rest:"60‚Äì90 sec",
       cue:"Lead with elbow. Pinky slightly up. Slight forward lean at hips.",
       howTo:"Stand with dumbbells at sides. Hinge 10‚Äì15¬∞ forward at hips ‚Äî this targets mid-delt better. Raise arms out to the sides, leading with elbows not hands. At top your pinky should be slightly higher than your thumb. Stop at shoulder height. Lower slowly. Go lighter than your ego wants.",
       sets:[{reps:"12‚Äì15",note:"Controlled ‚Äî feel mid-delt"},{reps:"15‚Äì20",note:"Drop to failure"},{reps:"20+",note:"Pump til it burns"}]},
      {name:"Cable Lateral Raise",type:"Isolation",rest:"60 sec",
       cue:"Cable at floor on the opposite side. Constant tension unlike dumbbells at the bottom.",
       howTo:"Set cable to floor. Stand sideways to the machine, hold handle with the arm furthest from it (cross-body). Raise your arm out to the side and up to shoulder height. The cable angle maintains tension even at the bottom ‚Äî unlike dumbbells. Do all reps one side then switch.",
       sets:[{reps:"15‚Äì20",note:"Each side"},{reps:"20+",note:"Failure"}]},
      {name:"Cable Rear Delt Fly",type:"Isolation",rest:"90 sec",
       cue:"Cable high, cross body. Pull through elbow in a wide arc. Rear delt ‚Äî not trap.",
       howTo:"Set cable high. Stand sideways, reach across with far hand to grab handle. Pull in a wide arc across and away from the machine, elbow leading. At full extension arm points out to the side. Squeeze the rear delt. Control back slowly. Do all reps then switch sides.",
       sets:[{reps:"12‚Äì15",note:"Each side"},{reps:"15‚Äì20",note:"Failure"}]},
      {name:"Dumbbell Arnold Press",type:"Compound",rest:"2 min",
       cue:"Start palms facing you. Rotate and press simultaneously. Full lockout.",
       howTo:"Hold dumbbells at shoulder height with palms facing toward you (like top of a curl). As you press up, rotate palms forward so they face away at the top. Rotation and press happen simultaneously. Lower by reversing the rotation. Hits all three delt heads. Sit on bench with back support to keep form strict.",
       sets:[{reps:"8‚Äì10",note:"RPT top set"},{reps:"10‚Äì12",note:"Drop 10% ‚Äî failure"}]}
    ]
  }
];

// ‚îÄ‚îÄ State ‚îÄ‚îÄ
let activeDay = 0;
let activeView = 'plan';
let logged = JSON.parse(localStorage.getItem('wt_logged') || '{}');
let notes = JSON.parse(localStorage.getItem('wt_notes') || '{}');
let expanded = {};

function save() {
  localStorage.setItem('wt_logged', JSON.stringify(logged));
  localStorage.setItem('wt_notes', JSON.stringify(notes));
}

// ‚îÄ‚îÄ Progress ‚îÄ‚îÄ
function getDayProgress(di) {
  const d = DAYS[di];
  let total = 0, done = 0;
  d.exercises.forEach((ex, ei) => {
    ex.sets.forEach((_, si) => {
      total++;
      if ((logged[d.id+'-'+ei+'-'+si] || {}).done) done++;
    });
  });
  return total ? Math.round(done/total*100) : 0;
}

// ‚îÄ‚îÄ SVG Ring ‚îÄ‚îÄ
function ringHTML(pct, color, size) {
  size = size || 60;
  const r = (size-6)/2;
  const circ = 2*Math.PI*r;
  const dash = pct/100*circ;
  return '<svg width="'+size+'" height="'+size+'" style="transform:rotate(-90deg)">'
    +'<circle cx="'+size/2+'" cy="'+size/2+'" r="'+r+'" fill="none" stroke="rgba(255,255,255,0.06)" stroke-width="3"/>'
    +'<circle cx="'+size/2+'" cy="'+size/2+'" r="'+r+'" fill="none" stroke="'+color+'" stroke-width="3" stroke-dasharray="'+dash+' '+circ+'" stroke-linecap="round" style="transition:stroke-dasharray .6s"/>'
    +'<text x="50%" y="50%" text-anchor="middle" dominant-baseline="middle" style="fill:'+(pct>0?color:'rgba(240,240,242,0.25)')+';font-size:11px;font-family:DM Mono,monospace;transform:rotate(90deg);transform-origin:50% 50%">'+(pct>0?pct+'%':'‚Äî')+'</text>'
    +'</svg>';
}

// ‚îÄ‚îÄ Render Plan ‚îÄ‚îÄ
function renderPlan() {
  const d = DAYS[activeDay];
  const pct = getDayProgress(activeDay);
  const totalSets = d.exercises.reduce((a,ex)=>a+ex.sets.length,0);
  const doneSets = d.exercises.reduce((a,ex,ei)=>a+ex.sets.filter((_,si)=>(logged[d.id+'-'+ei+'-'+si]||{}).done).length,0);

  let pillsHTML = '';
  DAYS.forEach((day, i) => {
    const p = getDayProgress(i);
    const active = i === activeDay;
    const dotStyle = p > 0 ? 'background:'+(active?'rgba(0,0,0,0.4)':day.color) : '';
    pillsHTML += '<button class="day-pill'+(active?' active':'')+'" style="'+(active?'background:'+day.color+';border-color:'+day.color:'')+'" onclick="selectDay('+i+')">'
      +'<span class="pill-label">'+day.label+'</span>'
      +'<span class="pill-name">'+day.name+'</span>'
      +'<span class="pill-dot" style="'+dotStyle+'"></span>'
      +'</button>';
  });

  let exHTML = '';
  d.exercises.forEach((ex, ei) => {
    const key = d.id+'-'+ei;
    const isOpen = !!expanded[key];
    const doneCt = ex.sets.filter((_,si)=>(logged[d.id+'-'+ei+'-'+si]||{}).done).length;
    const allDone = doneCt === ex.sets.length;
    const dotColor = ex.type==='Compound' ? d.color : 'rgba(255,255,255,0.25)';

    let setsHTML = '';
    if (isOpen) {
      ex.sets.forEach((set, si) => {
        const lkey = d.id+'-'+ei+'-'+si;
        const entry = logged[lkey] || {};
        setsHTML += '<div class="set-row">'
          +'<span class="set-num">'+(si+1)+'</span>'
          +'<div class="set-info"><div class="set-reps">'+set.reps+' reps</div><div class="set-note-txt">'+set.note+'</div></div>'
          +'<input class="set-input" type="number" inputmode="decimal" placeholder="kg" value="'+(entry.weight||'')+'" onchange="logWeight(\''+lkey+'\',this.value)"/>'
          +'<button class="set-check'+(entry.done?' done':'')+'" style="'+(entry.done?'background:'+d.color:'')+'" onclick="toggleSet(\''+lkey+'\')">'+(entry.done?'‚úì':'')+'</button>'
          +'</div>';
      });
    }

    exHTML += '<div class="ex-card" style="'+(allDone?'border-color:'+d.color+'55':'')+'">'
      +'<div class="ex-header" onclick="toggleEx(\''+key+'\')">'
      +'<div class="ex-left">'
      +'<div class="ex-dot" style="background:'+dotColor+'"></div>'
      +'<div class="ex-info"><div class="ex-name">'+ex.name+'</div><div class="ex-meta">'+ex.type+' ¬∑ '+ex.sets.length+' sets ¬∑ '+ex.rest+' rest</div></div>'
      +'</div>'
      +'<div class="ex-right">'
      +'<button class="info-btn" onclick="event.stopPropagation();showModal('+activeDay+','+ei+')">i</button>'
      +(doneCt>0?'<span class="done-badge" style="color:'+(allDone?d.color:'var(--dim)')+'">'+doneCt+'/'+ex.sets.length+'</span>':'')
      +'<span class="chevron'+(isOpen?' open':'')+'">‚Ä∫</span>'
      +'</div>'
      +'</div>'
      +(isOpen?'<div class="ex-body"><div class="cue">üéØ '+ex.cue+'</div>'+setsHTML+'</div>':'')
      +'</div>';
  });

  document.getElementById('view-plan').innerHTML =
    '<div class="day-strip">'+pillsHTML+'</div>'
    +'<div class="content">'
    +'<div class="hero" style="background:'+d.colorDim+';border:1px solid '+d.color+'22">'
    +'<div class="hero-label">Today</div>'
    +'<div class="hero-name" style="color:'+d.color+'">'+d.name+'</div>'
    +'<div class="hero-focus">'+d.focus+'</div>'
    +'<div class="hero-stats">'
    +'<div class="stat-chip">‚è± <b>'+d.totalTime+'</b></div>'
    +'<div class="stat-chip">üí™ <b>'+d.exercises.length+' exercises</b></div>'
    +'<div class="stat-chip">‚úì <b>'+doneSets+'/'+totalSets+' sets</b></div>'
    +'</div>'
    +'<div class="progress-ring">'+ringHTML(pct,d.color,60)+'</div>'
    +'</div>'
    +'<div class="note-strip">"'+d.note+'"</div>'
    +'<div class="section-label">Exercises</div>'
    +exHTML
    +'<div class="session-notes">'
    +'<div class="section-label">Session Notes</div>'
    +'<textarea class="notes-ta" placeholder="How was the session? PRs, energy, what to adjust..." onchange="saveNote('+d.id+',this.value)">'+((notes[d.id])||'')+'</textarea>'
    +'</div>'
    +'</div>';
}

// ‚îÄ‚îÄ Render Overview ‚îÄ‚îÄ
function renderOverview() {
  let html = '<div class="content"><div style="margin-bottom:20px"><div class="section-label">This Week</div></div>';
  const icons = ['üí™','üèãÔ∏è','üí•','ü¶µ','üî•'];
  DAYS.forEach((d,i) => {
    const pct = getDayProgress(i);
    const ts = d.exercises.reduce((a,ex)=>a+ex.sets.length,0);
    html += '<div class="ov-card" onclick="selectDay('+i+');switchView(\'plan\')">'
      +'<div class="ov-icon" style="background:'+d.colorDim+'">'+icons[i]+'</div>'
      +'<div class="ov-info">'
      +'<div class="ov-name" style="color:'+(pct===100?d.color:'var(--text)')+'">'+d.name+(pct===100?' ‚úì':'')+'</div>'
      +'<div class="ov-sub">'+d.label+' ¬∑ '+d.exercises.length+' exercises ¬∑ '+ts+' sets</div>'
      +(pct>0?'<div class="ov-bar"><div class="ov-fill" style="width:'+pct+'%;background:'+d.color+'"></div></div>':'')
      +'</div>'
      +'<div class="ov-pct" style="color:'+(pct>0?d.color:'var(--dim)')+'">'+( pct>0?pct+'%':'‚Äî')+'</div>'
      +'</div>';
  });
  html += '<button class="reset-btn" onclick="resetAll()">Reset all sets</button></div>';
  document.getElementById('view-overview').innerHTML = html;
}

// ‚îÄ‚îÄ Render Principles ‚îÄ‚îÄ
function renderPrinciples() {
  document.getElementById('view-principles').innerHTML = '<div class="content">'
    +'<div class="section-label" style="margin-bottom:12px">Influences</div>'
    +'<div class="bio-card"><div class="bio-who">Martin Berkhan</div><div class="bio-name-h">Leangains / RPT</div><div class="bio-text">Built Reverse Pyramid Training ‚Äî start every session at your absolute maximum, then reduce load ~10% per set. Hits peak CNS stimulus first, then chases hypertrophy. Sessions stay under 45 min. When you hit the top of your rep range on Set 1, add weight next week.</div></div>'
    +'<div class="bio-card"><div class="bio-who">Sam Sulek</div><div class="bio-name-h">Brosplit Intensity</div><div class="bio-text">Body-part splits with maximum effort. Train close to or at failure every session. High mind-muscle connection over ego weight. Incline everything for chest. Extend failing sets with partial reps. Simple split, every session counts.</div></div>'
    +'<div class="divider"></div>'
    +'<div class="section-label" style="margin-bottom:12px">Core Principles</div>'
    +[{icon:"‚¨áÔ∏è",t:"Reverse Pyramid",d:"Heaviest set first. Reduce weight ~10% each set. Berkhan's method for combining strength and hypertrophy in one session."},
      {icon:"üíÄ",t:"Train to Failure",d:"Final set of every exercise goes to absolute failure. Use partial reps to extend the set past the point where full reps are possible."},
      {icon:"üìà",t:"Double Progression",d:"Hit the top of your rep range on Set 1 ‚Üí add 2.5‚Äì5kg next session. Track every weight. No guessing."},
      {icon:"‚è±Ô∏è",t:"Smart Rest",d:"3‚Äì5 min between compound sets. 60‚Äì90 sec on isolation. Don't rush the heavy stuff ‚Äî quality over speed."}
     ].map(p=>'<div class="p-card"><div class="p-icon">'+p.icon+'</div><div class="p-title">'+p.t+'</div><div class="p-desc">'+p.d+'</div></div>').join('')
    +'<div class="divider"></div>'
    +'<div class="section-label" style="margin-bottom:4px">Progression Rules</div>'
    +'<div class="bio-card" style="padding:4px 20px">'
    +["Set 1 is always your max. Warm up well, then go all out.",
      "Each set after: drop ~10% weight, increase rep target.",
      "Final set: absolute failure. Partial reps to extend.",
      "Hit top of rep range on Set 1 ‚Üí add weight next session.",
      "Log every weight. No guessing. No ego. Just numbers.",
      "Rest 3‚Äì5 min compounds. 60‚Äì90 sec isolation."
     ].map((r,i)=>'<div class="rule-row"><div class="rule-num">0'+(i+1)+'</div><div class="rule-text">'+r+'</div></div>').join('')
    +'</div>'
    +'<div class="divider"></div>'
    +'<div class="section-label" style="margin-bottom:12px">Nutrition</div>'
    +'<div class="bio-card"><div class="bio-who">Berkhan 16:8</div><div class="bio-name-h">Intermittent Fasting</div><div class="bio-text">16-hour fast, 8-hour feeding window. Higher carbs on training days, lower on rest days. 1g+ protein per lb of bodyweight. Biggest meal post-workout. Black coffee during the fast is encouraged.</div></div>'
    +'</div>';
}

// ‚îÄ‚îÄ Actions ‚îÄ‚îÄ
function selectDay(i) {
  activeDay = i;
  renderPlan();
}

function toggleEx(key) {
  expanded[key] = !expanded[key];
  renderPlan();
}

function logWeight(key, val) {
  logged[key] = logged[key] || {};
  logged[key].weight = val;
  save();
}

function toggleSet(key) {
  logged[key] = logged[key] || {};
  logged[key].done = !logged[key].done;
  save();
  renderPlan();
  if (activeView === 'overview') renderOverview();
}

function saveNote(dayId, val) {
  notes[dayId] = val;
  save();
}

function resetAll() {
  if (confirm('Reset all logged sets? Your notes will be kept.')) {
    logged = {};
    save();
    renderPlan();
    renderOverview();
  }
}

function switchView(v) {
  document.querySelectorAll('.view').forEach(el => el.classList.remove('active'));
  document.getElementById('view-'+v).classList.add('active');
  document.querySelectorAll('.nav-label').forEach(el => el.classList.remove('active'));
  document.getElementById('nl-'+v).classList.add('active');
  activeView = v;
  if (v === 'plan') renderPlan();
  if (v === 'overview') renderOverview();
  if (v === 'principles') renderPrinciples();
  document.getElementById('app').scrollTop = 0;
}

function showModal(di, ei) {
  const ex = DAYS[di].exercises[ei];
  const color = DAYS[di].color;
  document.getElementById('m-title').textContent = ex.name;
  document.getElementById('m-howto').textContent = ex.howTo;
  document.getElementById('m-cue').textContent = '"' + ex.cue + '"';
  document.getElementById('m-cue-box').style.borderLeftColor = color;
  document.getElementById('m-cue-label').style.color = color;
  document.getElementById('modal').style.display = 'flex';
  document.body.style.overflow = 'hidden';
}

function closeModal() {
  document.getElementById('modal').style.display = 'none';
  document.body.style.overflow = '';
}

// ‚îÄ‚îÄ PWA Install ‚îÄ‚îÄ
let deferredPrompt;
window.addEventListener('beforeinstallprompt', e => {
  e.preventDefault();
  deferredPrompt = e;
  if (!localStorage.getItem('wt_install_dismissed')) {
    document.getElementById('install-banner').classList.add('show');
  }
});
document.getElementById('install-btn').addEventListener('click', () => {
  if (deferredPrompt) {
    deferredPrompt.prompt();
    deferredPrompt.userChoice.then(() => {
      deferredPrompt = null;
      document.getElementById('install-banner').classList.remove('show');
    });
  }
});
function dismissInstall() {
  localStorage.setItem('wt_install_dismissed', '1');
  document.getElementById('install-banner').classList.remove('show');
}

// ‚îÄ‚îÄ Service Worker for offline ‚îÄ‚îÄ
if ('serviceWorker' in navigator) {
  const swCode = `
    const CACHE = 'wt-v1';
    const FONT_URL = 'https://fonts.googleapis.com/css2?family=DM+Sans:wght@300;400;500;600&family=DM+Mono:wght@400;500&display=swap';
    self.addEventListener('install', e => {
      e.waitUntil(caches.open(CACHE).then(c => c.addAll(['./', FONT_URL]).catch(()=>{})));
      self.skipWaiting();
    });
    self.addEventListener('activate', e => {
      e.waitUntil(caches.keys().then(keys => Promise.all(keys.filter(k=>k!==CACHE).map(k=>caches.delete(k)))));
      self.clients.claim();
    });
    self.addEventListener('fetch', e => {
      e.respondWith(caches.match(e.request).then(r => r || fetch(e.request).then(res => {
        if (res.ok) { const c = res.clone(); caches.open(CACHE).then(cache => cache.put(e.request, c)); }
        return res;
      }).catch(() => caches.match('./'))));
    });
  `;
  const blob = new Blob([swCode], {type: 'application/javascript'});
  const swUrl = URL.createObjectURL(blob);
  navigator.serviceWorker.register(swUrl).catch(() => {});
}

// ‚îÄ‚îÄ Init ‚îÄ‚îÄ
renderPlan();
document.getElementById('nl-plan').classList.add('active');
</script>
</body>
</html>
